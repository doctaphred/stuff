#!/usr/bin/env bash
set -euo pipefail

# Create a temp file.
tmp="$(mktemp -t stuff)"

# Download to the temp file.
curl "$1" > "$tmp"

# The first 64 characters of the output is the SHA-256 hash.
key="$(shasum -a256 "$tmp" | cut -c-64)"

mv "$tmp" "data/$key"

echo "$key"

# Save the URL for future use.
echo "$1" >> "urls/$key"
